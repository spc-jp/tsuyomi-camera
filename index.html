<!doctype html> <html lang="ja"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>ä¾¡å€¤ã¿ã£ã‘ï¼ˆCloudflare APIé€£æºç‰ˆï¼‰</title> <script src="https://cdn.tailwindcss.com"></script> <script src="https://unpkg.com/lucide@latest"></script> <style> :root{ --bg1:#eaf7ff; --bg2:#f7fbff; --line:#7fd8ff; --ink:#0f172a; --muted:#64748b; --card:#ffffff; --shadow: 0 20px 60px rgba(15, 23, 42, .08); --btn:#0ea5e9; --btn2:#0284c7; --ring: 0 0 0 6px rgba(14,165,233,.12); } body{ background: radial-gradient(1200px 700px at 50% 10%, var(--bg1), var(--bg2)); color: var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif; } .glass{ background: rgba(255,255,255,.75); backdrop-filter: blur(10px); border: 1px solid rgba(15,23,42,.06); box-shadow: var(--shadow); } .chip{ border:1px solid rgba(14,165,233,.35); background: rgba(234,247,255,.8); color:#0b77a8; } .scanRing{ width: 190px; height: 190px; border-radius: 9999px; border: 2px solid rgba(127,216,255,.9); background: radial-gradient(circle at 50% 45%, rgba(127,216,255,.25), rgba(255,255,255,0)); box-shadow: 0 0 0 10px rgba(127,216,255,.07); position: relative; } .scanBtn{ position:absolute; left:50%; transform: translateX(-50%); bottom:-14px; background: linear-gradient(90deg, #111827, #0b1220); color:#c7f4ff; border: 1px solid rgba(127,216,255,.35); border-radius: 9999px; padding: 8px 14px; font-weight: 700; font-size: 12px; letter-spacing: .08em; box-shadow: 0 10px 25px rgba(2,132,199,.18); white-space: nowrap; } .btnPrimary{ background: linear-gradient(90deg, var(--btn), var(--btn2)); color: white; border-radius: 14px; padding: 12px 14px; font-weight: 800; box-shadow: 0 14px 30px rgba(2,132,199,.22); transition: transform .06s ease; } .btnPrimary:active{ transform: translateY(1px); } .btnGhost{ border:1px solid rgba(15,23,42,.10); border-radius: 14px; padding: 12px 14px; font-weight: 700; background: rgba(255,255,255,.7); } textarea{ width:100%; min-height: 120px; border-radius: 16px; border:1px solid rgba(15,23,42,.10); padding: 14px 14px; outline: none; background: rgba(255,255,255,.9); box-shadow: 0 0 0 0 rgba(14,165,233,0); transition: box-shadow .12s ease, border-color .12s ease; font-size: 16px; line-height: 1.6; } textarea:focus{ border-color: rgba(14,165,233,.55); box-shadow: var(--ring); } .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; } .smallNote{ color: var(--muted); font-size: 12.5px; line-height: 1.55; } .divider{ height:1px; background: rgba(15,23,42,.08); margin: 18px 0; } .imgBox{ width:100%; border-radius: 16px; border:1px dashed rgba(15,23,42,.15); background: rgba(255,255,255,.55); padding: 10px; } .badgeOk{ display:inline-block; padding: 3px 10px; border-radius: 9999px; background: rgba(34,197,94,.12); border:1px solid rgba(34,197,94,.25); color: rgba(21,128,61,1); font-weight: 800; font-size: 12px; } </style> </head> <body> <main class="min-h-screen flex items-center justify-center p-4 sm:p-6"> <section class="glass w-full max-w-[540px] rounded-[28px] p-6 sm:p-8">
  <div class="flex items-center justify-center mb-4">
    <div class="chip px-5 py-2 rounded-full text-xs font-extrabold tracking-[.18em]">PREMIUM</div>
  </div>

  <h1 class="text-center text-3xl sm:text-4xl font-black tracking-[.08em]">ä¾¡å€¤ã¿ã£ã‘</h1>
  <div class="text-center text-[11px] tracking-[.35em] text-slate-500 mt-2">VISUAL VALUE FINDER</div>

  <div class="mt-6 flex items-center justify-center">
    <div class="scanRing">
      <button id="cameraBtn" class="absolute inset-0 flex items-center justify-center rounded-full" type="button" title="å†™çœŸã‚’é¸ã¶">
        <div class="flex flex-col items-center justify-center gap-2">
          <div class="w-12 h-12 rounded-2xl bg-white/75 border border-slate-200 flex items-center justify-center shadow">
            <i data-lucide="camera" class="w-7 h-7 text-sky-600"></i>
          </div>
          <div class="text-[12px] font-bold text-slate-600">å†™çœŸã‚’é¸ã¶</div>
        </div>
      </button>
      <div class="scanBtn">SMART SCAN</div>
    </div>
  </div>

  <div class="mt-6 text-center">
    <div class="text-lg font-extrabold">ä¸€æšã®å†™çœŸã‹ã‚‰ã€<span class="text-sky-600">ãƒ“ã‚¸ãƒã‚¹ã®ä¾¡å€¤</span>ã‚’è¨€èªåŒ–ã€‚</div>
    <div class="text-sm text-slate-500 mt-2">è¦–è¦šæƒ…å ±ã¨æ–‡è„ˆã‚’è§£æã—ã€æŠ•ç¨¿ã®å©ãå°ã‚’ã¤ãã‚Šã¾ã™ã€‚</div>
  </div>

  <div class="divider"></div>

  <div class="smallNote mb-2">è§£æã®ãƒ’ãƒ³ãƒˆï¼ˆæ–‡ç« ã§ã‚‚OKï¼‰</div>
  <textarea id="hint" placeholder="ä¾‹ï¼šç”ºå·¥å ´ã§30å¹´ç¶šãæŠ€è¡“ã€‚å°ãƒ­ãƒƒãƒˆå¯¾å¿œãŒå¼·ã¿ã€‚åˆå›ç›¸è«‡ã®ãƒãƒ¼ãƒ‰ãƒ«ã‚’ä¸‹ã’ãŸã„ã€‚"></textarea>

  <div class="mt-4">
    <input id="file" type="file" accept="image/*" class="hidden" />
    <div class="imgBox">
      <div class="flex items-center justify-between gap-3">
        <div class="smallNote">
          å†™çœŸã¯ä»»æ„ã§ã™ã€‚é¸ã¶ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒå‡ºã¾ã™ğŸ™‚
          <div class="mono text-[11px] mt-1 text-slate-500">API: /chatï¼ˆCloudflare Workersï¼‰</div>
        </div>
        <div class="flex gap-2">
          <button id="clearPhotoBtn" type="button" class="btnGhost text-sm">å†™çœŸã‚’å¤–ã™</button>
        </div>
      </div>
      <div class="mt-3">
        <img id="preview" alt="" class="w-full rounded-xl hidden" />
      </div>
    </div>
  </div>

  <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3">
    <button id="sendBtn" type="button" class="btnPrimary w-full">
      é€ä¿¡ã—ã¦ç”Ÿæˆ
    </button>
    <button id="testBtn" type="button" class="btnGhost w-full">
      æ¥ç¶šãƒ†ã‚¹ãƒˆ
    </button>
  </div>

  <div class="mt-5">
    <div class="flex items-center justify-between">
      <div class="font-extrabold">çµæœ</div>
      <div id="status" class="badgeOk hidden">OK</div>
    </div>
    <pre id="result" class="mt-2 rounded-2xl border border-slate-200 bg-white/80 p-4 text-[13px] leading-relaxed whitespace-pre-wrap">ã“ã“ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™</pre>
  </div>

  <div class="mt-4 smallNote">
    ã†ã¾ãå‡ºãªã„æ™‚ã¯ã€ãƒšãƒ¼ã‚¸ã‚’ Ctrl + F5 ã§å¼·åˆ¶æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
  </div>

</section>

</main> <script> const API_URL = "https://flat-smoke-400c.yymmatsu.workers.dev/chat"; const elHint = document.getElementById("hint"); const elFile = document.getElementById("file"); const elPreview = document.getElementById("preview"); const elResult = document.getElementById("result"); const elStatus = document.getElementById("status"); let imageBase64 = ""; function setStatus(ok){ if(ok){ elStatus.classList.remove("hidden"); elStatus.textContent = "OK"; }else{ elStatus.classList.remove("hidden"); elStatus.textContent = "NG"; elStatus.style.background = "rgba(239,68,68,.12)"; elStatus.style.borderColor = "rgba(239,68,68,.25)"; elStatus.style.color = "rgba(153,27,27,1)"; } } function resetStatus(){ elStatus.classList.add("hidden"); elStatus.style.background = ""; elStatus.style.borderColor = ""; elStatus.style.color = ""; } function toBase64(file){ return new Promise((resolve, reject) => { const reader = new FileReader(); reader.onload = () => resolve(String(reader.result || "")); reader.onerror = reject; reader.readAsDataURL(file); }); } document.getElementById("cameraBtn").addEventListener("click", () => { elFile.click(); }); elFile.addEventListener("change", async () => { const file = elFile.files && elFile.files[0]; if(!file){ return; } try{ const dataUrl = await toBase64(file); imageBase64 = dataUrl; elPreview.src = dataUrl; elPreview.classList.remove("hidden"); }catch(e){ imageBase64 = ""; elPreview.classList.add("hidden"); alert("ç”»åƒã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸğŸ˜¢"); } }); document.getElementById("clearPhotoBtn").addEventListener("click", () => { imageBase64 = ""; elFile.value = ""; elPreview.src = ""; elPreview.classList.add("hidden"); }); document.getElementById("testBtn").addEventListener("click", async () => { resetStatus(); elResult.textContent = "æ¥ç¶šãƒ†ã‚¹ãƒˆä¸­â€¦"; try{ const res = await fetch("https://flat-smoke-400c.yymmatsu.workers.dev/", { method: "GET" }); const txt = await res.text(); elResult.textContent = "ãƒ†ã‚¹ãƒˆçµæœ\n" + txt; setStatus(res.ok); }catch(e){ elResult.textContent = "æ¥ç¶šãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸğŸ˜¢\n" + String(e); setStatus(false); } }); document.getElementById("sendBtn").addEventListener("click", async () => { resetStatus(); const text = (elHint.value || "").trim(); if(!text && !imageBase64){ alert("ãƒ’ãƒ³ãƒˆã‹å†™çœŸã€ã©ã¡ã‚‰ã‹å…¥ã‚Œã¦ãã ã•ã„ğŸ™‚"); return; } elResult.textContent = "é€ä¿¡ä¸­â€¦"; const payload = { text: text, imageBase64: imageBase64 }; try{ const res = await fetch(API_URL, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload) }); const data = await res.json().catch(() => ({})); if(!res.ok){ elResult.textContent = "APIã‚¨ãƒ©ãƒ¼\n" + "status: " + res.status + "\n\n" + "response:\n" + JSON.stringify(data, null, 2); setStatus(false); return; } const title = data.title || "ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãªã—ï¼‰"; const post = data.post || "ï¼ˆæœ¬æ–‡ãªã—ï¼‰"; const hashtags = Array.isArray(data.hashtags) ? data.hashtags.join(" ") : "ï¼ˆãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãªã—ï¼‰"; const cta = data.cta || "ï¼ˆCTAãªã—ï¼‰"; elResult.textContent = "ã‚¿ã‚¤ãƒˆãƒ«\n" + title + "\n\n" + "æœ¬æ–‡\n" + post + "\n\n" + "ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°\n" + hashtags + "\n\n" + "CTA\n" + cta; setStatus(true); }catch(e){ elResult.textContent = "é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸğŸ˜¢\n" + String(e); setStatus(false); } }); try{ if(window.lucide && typeof window.lucide.createIcons === "function"){ window.lucide.createIcons(); } }catch(e){} </script> </body> </html>